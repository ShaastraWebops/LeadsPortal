<div ng-include="'components/navbar/navbar.html'"></div>

<div class="leadsPortal" layout-margin>
	<div class="left right">
		<div class="md-whiteframe-z1">
			<md-toolbar ng-class="{ true: 'md-warn', false: 'md-primary' }[ deal.status ]">
				<h1 class="md-toolbar-tools">
					{{ deal.title }}
				</h1>
			</md-toolbar>
			<md-content>
		   	<md-card>
	   	   <div layout="row" layout-align="end center">
		     	<div class="md-actions" layout="row" layout-align="end center">
						<md-button class="md-raised md-primary md-hue-1" ng-click="dealCloseModal()" ng-show="showButton && !deal.status">
							Close Deal
						</md-button>
			   	</div>
			   	<div class="md-actions" layout="row" layout-align="end center">
						<md-button class="md-raised md-primary" ng-click="dealEditModal()" ng-show="showButton && !deal.status">
							Edit Deal
						</md-button>
			   	</div>
		     	<div class="md-actions" layout="row" layout-align="end center">
						<md-button class="md-raised md-primary md-hue-1" ng-click="dealOpen()" ng-show="showButton && deal.status">
							Re-open Deal
						</md-button>
			   	</div>
			   </div>
			   <div class="dealDetails">
			   		<md-card-content>
			     		<h2 class="md-display-1"> Deal Details </h2>
							<md-divider></md-divider>
					    <md-list>
						    <md-list-item class="md-3-line">
					    		<ng-md-icon style="fill:#00517F" icon="subject" size="32" class="md-avatar" alt="deal-title-img"></ng-md-icon>
						        <div class="md-list-item-text">
							        <h3> Title </h3>
							        <p>{{ deal.title }}</p>
						        </div>
						    </md-list-item>

								<md-divider md-inset ng-if="!$last"></md-divider>

								<div layout="row" ng-hide="!deal.status">
							    <md-list-item class="md-3-line">
					    			<ng-md-icon style="fill:#1F5C7F" ng-if="deal.result" icon="done" size="32" class="md-avatar" alt="deal-result-img"></ng-md-icon>
						    		<ng-md-icon style="fill:#1F5C7F" ng-if="!deal.result" icon="clear" size="32" class="md-avatar" alt="deal-result-img"></ng-md-icon>
							        <div class="md-list-item-text">
								        <h3> Result </h3>
								        <p>{{ dealresult }}</p>
							        </div>
							    </md-list-item>

							    <md-list-item class="md-3-line">
						    		<ng-md-icon style="fill:#0082CC" icon="comment" size="32" class="md-avatar" alt="deal-PoC-name-img"></ng-md-icon>
							        <div class="md-list-item-text">
								        <h3> Comments </h3>
								        <p>{{ deal.comment }}</p>
							        </div>
							    </md-list-item>
						    </div>

								<md-divider md-inset ng-if="!$last"></md-divider>

						    <md-list-item class="md-3-line">
					    		<ng-md-icon style="fill:#00A2FF" icon="description" size="32" class="md-avatar" alt="deal-summary-img"></ng-md-icon>
						        <div class="md-list-item-text">
							        <h3> Info </h3>
							        <p>{{ deal.info }}</p>
						        </div>
						    </md-list-item>

								<md-divider md-inset ng-if="!$last"></md-divider>
			                           
			          <md-list-item class="md-3-line">
					    		<ng-md-icon style="fill:#0082CC" icon="poll" size="32" class="md-avatar" alt="deal-vertical-img"></ng-md-icon>
						        <div class="md-list-item-text">
							        <h3> Vertical </h3>
							        <p>{{ deal.vertical.title }}</p>
						        </div>
						    </md-list-item>

								<md-divider md-inset ng-if="!$last"></md-divider>

						    <div layout="row">
							    <md-list-item class="md-3-line">
						    		<ng-md-icon style="fill:#1F5C7F" icon="work" size="32" class="md-avatar" alt="deal-company-img"></ng-md-icon>
							        <div class="md-list-item-text">
								        <h3> Company Name </h3>
								        <p>{{ deal.companyName }}</p>
							        </div>
							    </md-list-item>

							    <md-list-item class="md-3-line">
						    		<ng-md-icon style="fill:#0082CC" icon="account_box" size="32" class="md-avatar" alt="deal-PoC-name-img"></ng-md-icon>
							        <div class="md-list-item-text">
								        <h3> PoC's Name </h3>
								        <p>{{ deal.initialPointOfContactName }}</p>
							        </div>
							    </md-list-item>
						    </div>

								<md-divider md-inset ng-if="!$last"></md-divider>

						    <div layout="row">
							    <md-list-item class="md-3-line">
						    	<ng-md-icon style="fill:#00517F" icon="email" size="32" class="md-avatar" alt="deal-PoC-email-img"></ng-md-icon>
							        <div class="md-list-item-text">
								        <h3> PoC's Email Id </h3>
								        <p>{{ deal.initialPointOfContactEmail }}</p>
							        </div>
							    </md-list-item>
							    <md-list-item class="md-3-line">
						    		<ng-md-icon style="fill:#00A2FF" icon="phone" size="32" class="md-avatar" alt="deal-PoC-number-img"></ng-md-icon>
							        <div class="md-list-item-text">
								        <h3> PoC's Phone Number </h3>
								        <p>{{ deal.initialPointOfContactNumber }}</p>
							        </div>
							    </md-list-item>
						    </div>

								<md-divider md-inset ng-if="!$last"></md-divider>

						    <div layout="row">
							    <md-list-item class="md-3-line">						    		<ng-md-icon style="fill:#1F5C7F" icon="today" size="48" class="md-avatar" alt="deal-created-date-img"></ng-md-icon>
							        <div class="md-list-item-text">
								        <h3> Created </h3>
								        <p>{{ deal.createdBy.name }}</p>
								        <p>{{ deal.createdBy.email }}</p>
								        <p>{{ deal.createdBy.rollNumber }}</p>
								        <p>{{ deal.createdBy.phoneNumber }}</p>
								        <p>{{ deal.createdOn | date: 'medium' }}</p>
							        </div>
							    </md-list-item>
							    <md-list-item class="md-3-line">
						    		<ng-md-icon style="fill:#0082CC" icon="schedule" size="48" class="md-avatar" alt="deal-last-updated-img"></ng-md-icon>
							        <div class="md-list-item-text">
								        <h3> Last Updated On </h3>
								        <p>{{ deal.lastEditedBy.name }}</p>
								        <p>{{ deal.lastEditedBy.email }}</p>
								        <p>{{ deal.lastEditedBy.rollNumber }}</p>
								        <p>{{ deal.lastEditedBy.phoneNumber }}</p>
								        <p>{{ deal.updatedOn | date: 'medium' }}</p>
							        </div>
							    </md-list-item>
						    </div>
					    </md-list>

							<md-divider md-inset ng-if="!$last"></md-divider>

					    <md-list>
				    		<h1 class="md-headline">Assigned to</h1>
				    		<div layout="row">
							    <md-list-item class="md-3-line" ng-repeat="person in deal.assignees">
						    	<ng-md-icon style="fill:#00A2FF" icon="perm_identity" size="48" class="md-avatar" alt="deal-assignee-img"></ng-md-icon>
							        <div class="md-list-item-text">
								        <h3>{{ person.name }}</h3>
								        <p>{{ person.email }}</p>
								        <p>{{ person.rollNumber }}</p>
								        <p>{{ person.phoneNumber }}</p>
							        </div>
							    </md-list-item>
				    		</div>
							</md-list>
			 			</md-card-content>
		 			</div>
		 		</md-card>
		  </md-content>

			<md-content>
		    <md-card>
		    	<div class="createUpdate">
			    	<md-card-content>
			    		<div layout="row">
				     		<h2 flex class="md-display-1"> Updates </h2>
						   	<div class="md-actions" layout-align="end end">
									<md-button class="md-raised md-primary" ng-click="updateCreateModal()" ng-show="showButton && !deal.status">
										Create Update
									</md-button>
						   	</div>
			    		</div>
						
							<md-divider></md-divider>
							<div class="noUpdates">
								<div class="noUpdatesAsOfNow">
									<div ng-hide="(deal.updates.length)" layout="column" layout-fill>
										<md-whiteframe class="md-whiteframe-z1" layout layout-align="left center">
										    <span>No updates as of now</span>
										</md-whiteframe>
									</div>
								</div>
								<div class="editUpdate">
									<div ng-show="(deal.updates.length)" layout="column" layout-fill ng-repeat="update in deal.updates | orderBy: 'createdOn':true">
						      		<div class="md-actions" layout="row" layout-align="end center">
												<md-button class="md-raised md-primary md-hue-1" ng-click="updateEditModal(update, $index)" ng-show="showButton && !deal.status">
													Edit this Update
												</md-button>
						      		</div>
						      			<div class="whiteFrameClass">					
											<md-whiteframe class="md-whiteframe-z3" layout layout-align="left center">
										    <div class="listClass"></div>
										    <md-list>
											    <md-list-item class="md-3-line">
										  		  	<ng-md-icon style="fill:#00517F" icon="subject" size="32" class="md-avatar" alt="update-title-img"></ng-md-icon>
											        <div class="md-list-item-text">
												        <h3> Title </h3>
												        <p>{{ update.title }}</p>
											        </div>
											    </md-list-item>		

													<md-divider md-inset></md-divider>
								
											    <md-list-item class="md-3-line">
										  		  	<ng-md-icon style="fill:#00A2FF" icon="description" size="32" class="md-avatar" alt="update-summary-img"></ng-md-icon>
											        <div class="md-list-item-text">
												        <h3> Summary </h3>
												        <p>{{ update.summary }}</p>
											        </div>
											    </md-list-item>

													<md-divider md-inset></md-divider>

											    <div layout="row">
												    <md-list-item class="md-3-line">
										 		   		<ng-md-icon style="fill:#0082CC" icon="account_box" size="32" class="md-avatar" alt="update-PoC-name-img"></ng-md-icon>
												        <div class="md-list-item-text">
													        <h3> PoC Name </h3>
													        <p>{{ update.pointOfContactName }}</p>
												        </div>
												    </md-list-item>						    	
												    <md-list-item class="md-3-line">
											 		   	<ng-md-icon style="fill:#00517F" icon="email" size="32" class="md-avatar" alt="update-PoC-email-img"></ng-md-icon>
												        <div class="md-list-item-text">
													        <h3> PoC Email </h3>
													        <p>{{ update.pointOfContactEmail }}</p>
												        </div>
												    </md-list-item>						    	
												    <md-list-item class="md-3-line">
											 		   	<ng-md-icon style="fill:#00A2FF" icon="phone" size="32" class="md-avatar" alt="update-PoC-number-img"></ng-md-icon>
												        <div class="md-list-item-text">
													        <h3> PoC Number </h3>
													        <p>{{ update.pointOfContactNumber }}</p>
												        </div>
												    </md-list-item>						    	
											    </div>

													<md-divider md-inset></md-divider>

											    <div layout="row">
												    <md-list-item class="md-3-line">
											 		   	<ng-md-icon style="fill:#00517F" icon="sort" size="48" class="md-avatar" alt="next-activity-aim-details-img"></ng-md-icon>
												        <div class="md-list-item-text">
													        <h3> Next Activity </h3>
													        <p>{{ update.nextActivityAim }}</p>
												        </div>
												    </md-list-item>						    	
												    <md-list-item class="md-3-line">
											 		   <ng-md-icon style="fill:#00517F" icon="today" size="48" class="md-avatar" alt="next-activity-date-details-img"></ng-md-icon>
												        <div class="md-list-item-text">
													        <h3> Date </h3>
													        <p>{{ update.nextActivityDate | date: 'fullDate' }}</p>
												        </div>
												    </md-list-item>						    	
											    </div>

													<md-divider md-inset></md-divider>

											    <div layout="row">
												    <md-list-item class="md-3-line">
											 		   	<ng-md-icon style="fill:#0082CC" icon="perm_identity" size="48" class="md-avatar" alt="update-created-details-img"></ng-md-icon>
												        <div class="md-list-item-text">
													        <h3> Created - {{ update.createdOn | date: 'medium' }} </h3>
													        <p>{{ update.createdBy.name }}</p>
													        <p>{{ update.createdBy.email }}</p>
													        <p>{{ update.createdBy.rollNumber }}</p>
													        <p>{{ update.createdBy.phoneNumber }}</p>
												        </div>
												    </md-list-item>						    	
												    <md-list-item class="md-3-line">
											 		   	<ng-md-icon style="fill:#0082CC" icon="assignment_turned_in" size="48" class="md-avatar" alt="update-last-edited-details-img"></ng-md-icon>
												        <div class="md-list-item-text">
													        <h3> Last Edited - {{ update.updatedOn | date: 'medium' }} </h3>
													        <p>{{ update.lastEditedBy.name }}</p>
													        <p>{{ update.lastEditedBy.email }}</p>
													        <p>{{ update.lastEditedBy.rollNumber }}</p>
													        <p>{{ update.lastEditedBy.phoneNumber }}</p>
												        </div>
												    </md-list-item>						    	
											    </div>
												</md-list>
											</md-whiteframe>
										</div>	

										<md-divider md-inset ng-if="!$last"></md-divider>

									</div>
								</div>
								</div>
							</div>
						</md-card-content>
					</div>
				</md-card>
			<md-content>

		</div>
	</div>
</div>