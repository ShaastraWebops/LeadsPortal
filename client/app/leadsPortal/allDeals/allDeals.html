<div ng-include="'components/navbar/navbar.html'"></div>

<div class="leadsPortal" layout-margin>
  <div class="left right">
    <div class="md-whiteframe-z1">

    <div layout="column">
      <div layout="row">
        <ng-md-icon style="fill:#9999FF" icon="arrow_drop_down_circle" size="38" class="md-avatar1" alt="drop-down-img"></ng-md-icon>
         <md-select placeholder="All Deals" ng-model="dealCategory" ng-change="onChange()">
            <md-select-label>{{ dealCategory }}</md-select-label>
              <md-option ng-repeat="category in categories" value="{{ category }}">{{ category }}</md-option>
            </md-select>
      </div>

      <div layout="row">
        <ng-md-icon style="fill:#0082CC" icon="poll" size="48" class="md-avatar" alt="deal-searchverticals-img"></ng-md-icon>
         <md-chips ng-model="selectedVerticals" md-autocomplete-snap md-require-match>
            <md-autocomplete
              md-selected-item="selectedItem"
              md-search-text="searchText"
              md-items="item in verticals"
              md-item-text="item.name"
              placeholder="search deals of vertical">
                <span md-highlight-text="searchText">{{ item.name }}</span>
            </md-autocomplete>
            <md-chip-template>
              <strong>{{ $chip.name }}</strong>
            </md-chip-template>
          </md-chips>
        <ng-md-icon style="fill:#00A2FF" icon="people" size="48" class="md-avatar" alt="deal-searchcoords-img"></ng-md-icon>
         <md-chips ng-model="selectedCoords" md-autocomplete-snap md-require-match>
            <md-autocomplete
              md-selected-item="selectedItem"
              md-search-text="searchText"
              md-items="item in coords"
              md-item-text="item.name"
              placeholder="search deals of coord">
                <span md-highlight-text="searchText">{{ item.name }}</span>
            </md-autocomplete>
            <md-chip-template>
              <strong>{{ $chip.name }}</strong>
            </md-chip-template>
          </md-chips>
          <ng-md-icon style="fill:#00517F" icon="description" size="48" class="md-avatar" alt="deal-searchtext-img"></ng-md-icon>
          <md-input-container md-no-float class="searchTextInput">
            <input name="search" placeholder="Type text to search" type="text" ng-model="searchText">
          </md-input-container>
          
         <md-button type="button" ng-click="onClick()" class="md-raised md-primary">Get Deals</md-button>
      </div>
    </div>
    
      <md-toolbar class="md-theme-light">
        <h2 class="md-toolbar-tools">
          <span>{{ dealsTitle }}</span>
        </h2>
      </md-toolbar>
      <md-content>

<!-- 
        <md-card ng-repeat="deal in sortedDeals | orderBy: 'updatedOn':true">
          <md-card-content layout="column">
            <div layout="row">
              <md-list-item class="md-3-line">
                <ng-md-icon icon="toc" style="fill:#00A2FF" size="32" class="md-avatar" alt="deal-title-img"></ng-md-icon>
                  <div class="md-list-item-text">
                    <h3>{{ deal.title | characters:30 :false }}</h3>
                    <p>{{ deal.info | characters:80 :false }}</p>
                  </div>
              </md-list-item>
              <md-list-item class="md-3-line">
                <ng-md-icon icon="today" style="fill:#0082CC" size="32" class="md-avatar" alt="deal-created-img"></ng-md-icon>
                  <div class="md-list-item-text">
                    <h3> Created On </h3>
                    <p>{{ deal.createdOn | date: 'medium' }}</p>
                  </div>
              </md-list-item>
              <md-list-item class="md-3-line">
                <ng-md-icon icon="schedule" style="fill:#00517F" size="32" class="md-avatar" alt="deal-last-updated-img"></ng-md-icon>
                  <div class="md-list-item-text">
                    <h3> Latest Activity </h3>
                    <p>{{ deal.updatedOn | date: 'medium' }}</p>
                  </div>
              </md-list-item>
            </div>
          </md-card-content>
          <div class="md-actions" layout="row" layout-align="end center">
            <md-button ui-sref="deal({id: deal._id})" class="md-raised md-primary md-hue-3">View Deal</md-button>
          </div>
        </md-card>
 -->  

        <md-list>
          <div ng-repeat="deal in sortedDeals | orderBy: 'updatedOn':true">
            <md-list-item ng-click="gotoDeal(deal)">
                <ng-md-icon icon="dns" ng-style="{true: {fill: '#FF4D4D'}, false: {fill: '#00A2FF'}}[ deal.status ]" size="32" class="md-avatar" alt="deal-title-img"></ng-md-icon>
                <div layout="row" layout-margin layout-fill layout-padding>
                  <div flex="33">
                    <div class="md-list-item-text">
                      <h6 class="md-title">Title</h6>
                      <h5>{{ deal.title | characters:20 :false }}</h5>
                    </div>
                  </div>

                  <div flex="33">
                    <div class="md-list-item-text">
                      <h6 class="md-title">Created on</h6>
                      <h5>{{ deal.createdOn | date: 'medium' }}</h5>
                    </div>
                  </div>

                  <div flex="33">
                    <div class="md-list-item-text">
                      <h6 class="md-title">Updated on</h6>
                      <h5>{{ deal.updatedOn | date: 'medium' }}</h5>
                    </div>
                  </div>
                </div>
            </md-list-item>
            <md-divider></md-divider>
          </div>
        </md-list>

      </md-content>
    </div>
  </div>
</div>